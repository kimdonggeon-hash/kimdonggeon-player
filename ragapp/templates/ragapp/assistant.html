{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ì‚¬ë‚´ AI ì–´ì‹œìŠ¤í„´íŠ¸</title>

<style>
    :root {
        --bg-main:#0f172a;
        --bg-panel:#1e2538;
        --bg-msg-user:rgba(56,189,248,0.1);
        --bg-msg-bot:rgba(255,255,255,0.05);
        --bg-msg-error:rgba(244,63,94,0.12);
        --border-soft:rgba(255,255,255,0.15);
        --border-strong:rgba(255,255,255,0.3);
        --accent:#38bdf8;
        --accent-soft:rgba(56,189,248,0.15);
        --accent-border:rgba(56,189,248,0.5);
        --text-main:#f8fafc;
        --text-dim:#94a3b8;
        --danger:#f87171;
        --radius-lg:0.75rem;
    }

    *{box-sizing:border-box;}

    html,body{
        margin:0;
        padding:0;
        background:var(--bg-main);
        color:var(--text-main);
        font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;
        height:100%;
        -webkit-font-smoothing:antialiased;
    }

    body{
        display:flex;
        flex-direction:column;
    }

    /* ìƒë‹¨ í—¤ë”ë°” */
    .app-header{
        background:linear-gradient(90deg,#6366f1 0%,#4f46e5 100%);
        color:#fff;
        padding:0.75rem 1rem;
        display:flex;
        flex-wrap:wrap;
        align-items:flex-start;
        justify-content:space-between;
        box-shadow:0 20px 40px rgba(0,0,0,0.6);
        z-index:10;
    }
    .header-left{
        display:flex;
        flex-direction:column;
        gap:.4rem;
        min-width:0;
    }
    .app-title-row{
        display:flex;
        flex-wrap:wrap;
        align-items:center;
        gap:.5rem;
        font-size:.9rem;
        font-weight:600;
        line-height:1.3;
    }
    .app-badge{
        background:rgba(255,255,255,0.15);
        border:1px solid rgba(255,255,255,0.4);
        border-radius:.4rem;
        padding:.2rem .4rem;
        font-size:.65rem;
        font-weight:500;
        line-height:1.2;
        color:#fff;
    }
    .app-hint{
        font-size:.7rem;
        line-height:1.4;
        color:rgba(255,255,255,0.8);
        max-width:600px;
        word-break:break-word;
    }

    .header-links{
        flex-shrink:0;
        display:flex;
        flex-wrap:wrap;
        gap:.5rem;
    }
    .mini-nav-btn{
        background:rgba(0,0,0,0.3);
        border:1px solid rgba(255,255,255,0.4);
        border-radius:.5rem;
        color:#fff;
        font-size:.7rem;
        line-height:1.2;
        font-weight:500;
        padding:.5rem .6rem;
        text-decoration:none;
        display:inline-flex;
        align-items:center;
        gap:.4rem;
        box-shadow:0 8px 16px rgba(0,0,0,0.6);
    }
    .mini-nav-btn:hover{
        background:rgba(0,0,0,0.45);
    }

    /* ë©”ì¸ ì˜ì—­ ì „ì²´ */
    .assistant-shell{
        flex:1 1 auto;
        display:flex;
        justify-content:center;
        padding:1rem;
        min-height:0; /* for flex scroll */
    }

    /* ì‹¤ì œ ì±— ì¹´ë“œ */
    .chat-card{
        background:var(--bg-panel);
        border:1px solid var(--border-soft);
        border-radius:var(--radius-lg);
        box-shadow:0 30px 60px rgba(0,0,0,0.8),0 4px 12px rgba(0,0,0,0.6);
        width:100%;
        max-width:800px;
        min-height:0;
        display:flex;
        flex-direction:column;
    }

    /* ë©”ì‹œì§€ ìŠ¤í¬ë¡¤ ì˜ì—­ */
    .chat-messages{
        flex:1 1 auto;
        min-height:0;
        max-height:calc(100vh - 220px);
        overflow-y:auto;
        padding:1rem 1rem 0;
        font-size:.8rem;
        line-height:1.4;
        word-break:break-word;
        white-space:pre-wrap;
    }

    .msg{
        border-radius:.5rem;
        padding:.6rem .7rem;
        margin-bottom:.6rem;
        box-shadow:0 8px 16px rgba(0,0,0,0.6);
        font-size:.8rem;
        line-height:1.45;
        max-width:100%;
    }
    .msg.user{
        background:var(--bg-msg-user);
        border:1px solid rgba(56,189,248,0.4);
        color:var(--accent);
    }
    .msg.bot{
        background:var(--bg-msg-bot);
        border:1px solid rgba(255,255,255,0.12);
        color:var(--text-main);
    }
    .msg.bot.blocked{
        background:var(--bg-msg-error);
        border:1px solid rgba(244,63,94,0.5);
        color:var(--danger);
    }
    .msg.error{
        background:var(--bg-msg-error);
        border:1px solid rgba(244,63,94,0.5);
        color:var(--danger);
    }

    /* FAQ ì¹´ë“œ ìŠ¤íƒ€ì¼ (botì´ FAQë¡œ ë‹µí•  ë•Œ) */
    .faq-card{
        background:rgba(56,189,248,0.07);
        border:1px solid rgba(56,189,248,0.4);
        border-radius:.5rem;
        padding:.6rem .75rem;
        color:#f8fafc;
        font-size:.8rem;
        line-height:1.45;
        box-shadow:0 8px 16px rgba(0,0,0,0.6);
        word-break:break-word;
    }
    .faq-head{
        font-size:.8rem;
        font-weight:600;
        color:#38bdf8;
        margin-bottom:.4rem;
        display:flex;
        align-items:center;
        gap:.4rem;
    }
    .faq-q{
        color:#38bdf8;
        font-size:.75rem;
        font-weight:500;
        margin-bottom:.4rem;
        word-break:break-word;
    }
    .faq-answer{
        font-size:.75rem;
        line-height:1.45;
        white-space:pre-wrap;
        word-break:break-word;
        color:#f8fafc;
    }

    /* ì°¨ë‹¨ ì¹´ë“œ */
    .blocked-card{
        background:var(--bg-msg-error);
        border:1px solid rgba(244,63,94,0.5);
        border-radius:.5rem;
        box-shadow:0 8px 16px rgba(0,0,0,0.6);
        color:var(--danger);
        padding:.6rem .75rem;
        font-size:.8rem;
        line-height:1.4;
        word-break:break-word;
    }
    .blocked-head{
        font-size:.8rem;
        font-weight:600;
        margin-bottom:.4rem;
        display:flex;
        align-items:center;
        gap:.4rem;
    }
    .blocked-hint{
        font-size:.7rem;
        line-height:1.3;
        color:rgb(244,126,146);
        margin-top:.4rem;
        word-break:break-word;
    }

    /* ê·¼ê±° í† ê¸€ ì˜ì—­ */
    .evidence-wrap{
        margin-top:.6rem;
        font-size:.7rem;
        line-height:1.4;
        color:#f8fafc;
    }
    .evidence-btn{
        background:var(--accent-soft);
        border:1px solid var(--accent-border);
        border-radius:.4rem;
        color:var(--accent);
        font-size:.7rem;
        line-height:1.2;
        font-weight:500;
        padding:.4rem .5rem;
        cursor:pointer;
    }
    .evidence-btn:hover{
        filter:brightness(1.1);
        box-shadow:0 0 12px rgba(56,189,248,0.5);
    }
    .evidence-box{
        background:rgba(15,23,42,0.6);
        border:1px solid rgba(148,163,184,0.3);
        border-radius:.5rem;
        padding:.6rem .6rem;
        font-size:.7rem;
        line-height:1.4;
        color:#f8fafc;
        margin-top:.5rem;
        max-height:200px;
        overflow-y:auto;
        word-break:break-word;
    }
    .evidence-list{
        margin:0;
        padding-left:1rem;
    }
    .evidence-list li{
        margin-bottom:.5rem;
    }
    .ev-title{
        font-weight:500;
        color:#f8fafc;
        font-size:.7rem;
        word-break:break-all;
    }
    .ev-title a{
        color:#f8fafc;
        font-weight:500;
        font-size:.7rem;
        text-decoration:underline;
        text-underline-offset:2px;
        word-break:break-all;
    }
    .ev-snippet{
        color:var(--text-dim);
        font-size:.7rem;
        line-height:1.4;
        margin-top:.25rem;
        white-space:pre-line;
    }

    /* í”¼ë“œë°± row (ğŸ‘ğŸ‘) */
    .feedback-row{
        display:flex;
        align-items:center;
        flex-wrap:wrap;
        gap:.5rem;
        margin-top:.6rem;
        font-size:.7rem;
        line-height:1.3;
        color:var(--text-dim);
    }
    .feedback-row .label{
        color:var(--text-dim);
        font-size:.7rem;
    }
    .thumb-btn{
        background:rgba(255,255,255,0.07);
        border:1px solid rgba(255,255,255,0.2);
        border-radius:.4rem;
        color:#f8fafc;
        font-size:.75rem;
        line-height:1.2;
        padding:.35rem .5rem;
        cursor:pointer;
    }
    .thumb-btn[disabled]{
        opacity:.4;
        cursor:not-allowed;
    }

    /* ì…ë ¥ ì˜ì—­ */
    .chat-input-row{
        border-top:1px solid rgba(255,255,255,0.08);
        background:#1e2538;
        padding:.75rem;
        display:flex;
        flex-wrap:nowrap;
        gap:.5rem;
        align-items:stretch;
        border-radius:0 0 var(--radius-lg) var(--radius-lg);
    }
    .chat-input{
        flex:1 1 auto;
        min-width:0;
        background:#0f172a;
        color:#f8fafc;
        border:1px solid rgba(255,255,255,0.2);
        border-radius:.5rem;
        padding:.6rem .6rem;
        font-size:.8rem;
        line-height:1.3;
        font-family:inherit;
    }
    .chat-input:focus{
        outline:2px solid #6366f1;
        box-shadow:0 0 15px rgba(99,102,241,0.6);
    }
    .chat-send-btn{
        flex:0 0 auto;
        background:linear-gradient(90deg,#6366f1 0%,#4f46e5 100%);
        border:1px solid rgba(99,102,241,0.6);
        border-radius:.5rem;
        color:#fff;
        font-size:.8rem;
        line-height:1.2;
        font-weight:600;
        padding:.6rem .75rem;
        cursor:pointer;
        min-width:64px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        box-shadow:0 16px 32px rgba(99,102,241,0.4),0 2px 6px rgba(0,0,0,0.6);
    }
    .chat-send-btn[disabled]{
        opacity:.5;
        cursor:not-allowed;
    }
    .chat-send-btn:hover:not([disabled]){
        filter:brightness(1.07);
        box-shadow:0 20px 40px rgba(99,102,241,0.55),0 2px 8px rgba(0,0,0,0.8);
    }

    @media(max-width:600px){
        .app-header{
            flex-direction:column;
            align-items:flex-start;
        }
        .header-links{
            flex-direction:row;
        }
        .chat-messages{
            max-height:calc(100vh - 250px);
        }
    }
</style>
</head>
<body>

<header class="app-header">
    <div class="header-left">
        <div class="app-title-row">
            <span>ì‚¬ë‚´ AI ì–´ì‹œìŠ¤í„´íŠ¸</span>
            <span class="app-badge">RAG + ì›¹ ìµœì‹  ì •ë³´</span>
        </div>
        <div class="app-hint">
            ì‚¬ë‚´ ë¬¸ì„œ / ìµœê·¼ ë‰´ìŠ¤ / FAQ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•´ìš”.<br/>
            ë¯¼ê°ì •ë³´(ê°œì¸ ì—°ë½ì²˜ ë“±)ëŠ” ì°¨ë‹¨ë¼ìš”.
        </div>
    </div>

    <nav class="header-links">
        <a class="mini-nav-btn" href="/" target="_blank" rel="noopener noreferrer">ğŸ  í™ˆ</a>
        <a class="mini-nav-btn" href="/ragadmin/" target="_blank" rel="noopener noreferrer">ğŸ›  RAG Admin</a>
    </nav>
</header>

<main class="assistant-shell">
    <section class="chat-card">

        <!-- ë©”ì‹œì§€ ì˜ì—­ -->
        <div class="chat-messages" id="chatMessages">
            <!-- JSê°€ .msg.user / .msg.bot / .msg.error divë¥¼ append -->
        </div>

        <!-- ì…ë ¥ ì˜ì—­ -->
        <form class="chat-input-row" onsubmit="return sendChat(event);">
            {% csrf_token %}
            <input
                id="chatInput"
                class="chat-input"
                type="text"
                placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”â€¦"
                autocomplete="off"
            />
            <button
                id="chatSendBtn"
                class="chat-send-btn"
                type="submit"
            >ì „ì†¡</button>
        </form>

    </section>
</main>

<script>
    // ë°±ì—”ë“œ ì—”ë“œí¬ì¸íŠ¸ë“¤
    const CHAT_ENDPOINT = "{% url 'rag_qa' %}";          // POSTë¡œ ì§ˆë¬¸ ë³´ë‚´ë©´ JSON ë‹µë³€
    const FEEDBACK_ENDPOINT = "{% url 'submit_feedback' %}"; // /api/feedback
</script>

<script>
    // CSRF í† í° ì¿ í‚¤ ê°€ì ¸ì˜¤ê¸° (Django)
    function getCookie(name){
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if(parts.length === 2){
            return decodeURIComponent(parts.pop().split(";").shift());
        }
    }

    // ë©”ì‹œì§€ append (ìœ ì € / ì—ëŸ¬ / FAQì‹œë“œ ë“±)
    // isHtml=trueë©´ textë¥¼ innerHTMLë¡œ ê·¸ëŒ€ë¡œ ë„£ëŠ”ë‹¤ (ìš°ë¦¬ê°€ ë§Œë“  safe ë¸”ëŸ­ë§Œ)
    function appendMessage(role, text, isHtml){
        const msgs = document.getElementById("chatMessages");
        if(!msgs) return;
        const div = document.createElement("div");
        div.classList.add("msg");
        if(role === "user"){
            div.classList.add("user");
        }else if(role === "bot"){
            div.classList.add("bot");
        }else if(role === "error"){
            div.classList.add("error");
        }

        if(isHtml){
            div.innerHTML = text;
        }else{
            div.textContent = text;
        }

        msgs.appendChild(div);
        msgs.scrollTop = msgs.scrollHeight;
    }

    // ë´‡ ë‹µë³€ append (FAQ ì¹´ë“œ / ì°¨ë‹¨ / RAG ê·¼ê±° / ğŸ‘ğŸ‘)
    // data = { mode, answer, answer_html, hits, log_id, ... }
    // sendChat()ì—ì„œ data._user_question ì„ ë„£ì–´ì¤Œ
    function appendBotAnswer(data){
        const msgs = document.getElementById("chatMessages");
        if(!msgs) return;

        const mode = data.mode || "";
        const answerText = data.answer || "(ë¹ˆ ì‘ë‹µ)";
        const hits = data.hits || [];
        const faqHtml = data.answer_html || "";
        const userQuestion = data._user_question || "";

        // wrapper
        const outer = document.createElement("div");
        outer.classList.add("msg","bot");
        if(mode === "blocked"){
            outer.classList.add("blocked");
        }

        let contentEl;
        if(mode === "faq" && faqHtml){
            // ì„œë²„ì—ì„œ escapeëœ FAQ ì¹´ë“œ HTML ê·¸ëŒ€ë¡œ
            contentEl = document.createElement("div");
            contentEl.innerHTML = faqHtml;
        }else if(mode === "blocked"){
            // ì°¨ë‹¨ ì¹´ë“œ
            contentEl = document.createElement("div");
            contentEl.classList.add("blocked-card");
            contentEl.innerHTML =
                '<div class="blocked-head">âŒ ë¯¼ê°í•œ ì§ˆë¬¸ìœ¼ë¡œ ë¶„ë¥˜ë˜ì—ˆì–´ìš”</div>' +
                '<div class="blocked-body"></div>' +
                '<div class="blocked-hint">ê°œì¸ì •ë³´(ì—°ë½ì²˜ ë“±)ë‚˜ ë³´ì•ˆì— ë¯¼ê°í•œ ìš”ì²­ì€ ë‹µë³€í•  ìˆ˜ ì—†ì–´ìš”.</div>';
            const bodyEl = contentEl.querySelector(".blocked-body");
            if(bodyEl){
                bodyEl.textContent = answerText;
            }
        }else{
            // ì¼ë°˜ ë‹µë³€ (RAG ë“±)
            contentEl = document.createElement("div");
            contentEl.classList.add("assistant-answer-text");
            contentEl.textContent = answerText;
        }

        outer.appendChild(contentEl);

        // ê·¼ê±° í† ê¸€ (RAGì¼ ë•Œë§Œ hits ìˆì„ ë•Œë§Œ)
        if(mode === "rag" && hits && hits.length > 0){
            const evWrap = document.createElement("div");
            evWrap.classList.add("evidence-wrap");

            const toggleBtn = document.createElement("button");
            toggleBtn.type = "button";
            toggleBtn.classList.add("evidence-btn","evidence-toggle-btn");
            toggleBtn.textContent = "ğŸ“ ê·¼ê±° ë³´ê¸° â–¾";

            const evBox = document.createElement("div");
            evBox.classList.add("evidence-box");
            evBox.style.display = "none";

            const ul = document.createElement("ul");
            ul.classList.add("evidence-list");

            hits.forEach(function(h){
                const li = document.createElement("li");

                const titleDiv = document.createElement("div");
                titleDiv.classList.add("ev-title");

                // ë¼ë²¨ ë§Œë“¤ê¸°
                let label = h.title || "ë¬¸ì„œ";
                if(h.source){
                    label += " Â· " + h.source;
                }

                if(h.url){
                    const a = document.createElement("a");
                    a.href = h.url;
                    a.target = "_blank";
                    a.rel = "noopener noreferrer";
                    a.textContent = label;
                    titleDiv.appendChild(a);
                }else{
                    titleDiv.textContent = label;
                }

                const snipDiv = document.createElement("div");
                snipDiv.classList.add("ev-snippet");
                snipDiv.textContent = h.snippet || "";

                li.appendChild(titleDiv);
                li.appendChild(snipDiv);
                ul.appendChild(li);
            });

            evBox.appendChild(ul);
            evWrap.appendChild(toggleBtn);
            evWrap.appendChild(evBox);
            outer.appendChild(evWrap);
        }

        // ğŸ‘ğŸ‘ í”¼ë“œë°± row
        const fbRow = document.createElement("div");
        fbRow.classList.add("feedback-row");
        fbRow.dataset.question = userQuestion;
        fbRow.dataset.answer = answerText;
        fbRow.dataset.answerType = (mode === "rag" ? "rag" : (mode === "faq" ? "other" : "other"));
        fbRow.dataset.sources = JSON.stringify(hits || []);

        const label = document.createElement("span");
        label.classList.add("label");
        label.textContent = "ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?";

        const upBtn = document.createElement("button");
        upBtn.type = "button";
        upBtn.classList.add("thumb-btn");
        upBtn.textContent = "ğŸ‘";
        upBtn.dataset.helpful = "true";

        const downBtn = document.createElement("button");
        downBtn.type = "button";
        downBtn.classList.add("thumb-btn");
        downBtn.textContent = "ğŸ‘";
        downBtn.dataset.helpful = "false";

        fbRow.appendChild(label);
        fbRow.appendChild(upBtn);
        fbRow.appendChild(downBtn);

        outer.appendChild(fbRow);

        msgs.appendChild(outer);
        msgs.scrollTop = msgs.scrollHeight;
    }

    async function sendChat(evt){
        evt.preventDefault();

        const inputEl = document.getElementById("chatInput");
        const sendBtn = document.getElementById("chatSendBtn");
        if(!inputEl || !sendBtn) return false;

        const q = (inputEl.value || "").trim();
        if(!q) return false;

        // í™”ë©´ì— ìœ ì € ë©”ì‹œì§€ ë¨¼ì € append
        appendMessage("user", q, false);

        // ì…ë ¥/ë²„íŠ¼ ì ê·¸ê¸°
        inputEl.value = "";
        inputEl.disabled = true;
        sendBtn.disabled = true;
        const oldBtnTxt = sendBtn.textContent;
        sendBtn.textContent = "â³";

        try{
            const resp = await fetch(CHAT_ENDPOINT, {
                method:"POST",
                headers:{
                    "Content-Type":"application/json",
                    "X-Requested-With":"fetch",
                    "X-CSRFToken": getCookie("csrftoken"),
                },
                body: JSON.stringify({ q:q }),
            });

            const rawText = await resp.text();
            let data;
            try{
                data = JSON.parse(rawText);
            }catch(parseErr){
                appendMessage(
                    "error",
                    "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: " + parseErr + "\n" + rawText.slice(0,200),
                    false
                );
                return false;
            }

            if(data.ok !== false){
                data._user_question = q;
                appendBotAnswer(data);
            }else{
                appendMessage("error", "ì—ëŸ¬: " + (data.error || "ì„œë²„ ì˜¤ë¥˜"), false);
            }
        }catch(err){
            appendMessage("error", "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: " + err, false);
        }finally{
            inputEl.disabled = false;
            sendBtn.disabled = false;
            sendBtn.textContent = oldBtnTxt;
            inputEl.focus();
        }

        return false;
    }

    // ğŸ‘ğŸ‘ ì „ì†¡
    document.addEventListener("click", async function(e){
        const btn = e.target.closest(".thumb-btn");
        if(!btn) return;

        const row = btn.closest(".feedback-row");
        if(!row) return;

        // ì´ë¯¸ ëˆŒë €ìœ¼ë©´ ë¬´ì‹œ
        if(btn.disabled) return;

        const isHelpful = (btn.dataset.helpful === "true");

        const payload = {
            question: row.dataset.question || "",
            answer: row.dataset.answer || "",
            answer_type: row.dataset.answerType || "rag",
            is_helpful: isHelpful,
        };

        // ê·¼ê±° ì†ŒìŠ¤(hits) ê°™ì´ ë³´ë‚´ê¸°
        try{
            if(row.dataset.sources){
                payload.sources = JSON.parse(row.dataset.sources);
            }
        }catch(errParse){
            console.warn("sources parse ì‹¤íŒ¨", errParse);
        }

        // ë¹„í™œì„±í™” (ì¤‘ë³µ ì œì¶œ ë°©ì§€)
        const allBtns = row.querySelectorAll(".thumb-btn");
        allBtns.forEach(b=>{ b.disabled = true; });

        try{
            const resp = await fetch(FEEDBACK_ENDPOINT, {
                method:"POST",
                headers:{
                    "Content-Type":"application/json",
                    "X-CSRFToken": getCookie("csrftoken"),
                },
                body: JSON.stringify(payload),
            });

            const textResp = await resp.text();
            let json;
            try{
                json = JSON.parse(textResp);
            }catch(parseErr){
                json = {ok:false, error:"JSON íŒŒì‹± ì‹¤íŒ¨"};
            }

            if(json.ok !== false){
                row.innerHTML = '<span class="label" style="color:#4ade80;">ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ™</span>';
            }else{
                row.innerHTML = '<span class="label" style="color:#f87171;">ì „ì†¡ ì‹¤íŒ¨ ğŸ˜¥ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”</span>';
            }
        }catch(err2){
            row.innerHTML = '<span class="label" style="color:#f87171;">ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ğŸ˜¥</span>';
        }
    });

    // ê·¼ê±° í† ê¸€
    document.addEventListener("click", function(e){
        if(!e.target.matches(".evidence-toggle-btn")) return;
        const wrap = e.target.closest(".evidence-wrap");
        if(!wrap) return;
        const box = wrap.querySelector(".evidence-box");
        if(!box) return;

        const opened = box.style.display !== "none";
        box.style.display = opened ? "none" : "block";
        e.target.textContent = opened ? "ğŸ“ ê·¼ê±° ë³´ê¸° â–¾" : "ğŸ“ ê·¼ê±° ìˆ¨ê¸°ê¸° â–´";
    });

    // ì²« ì§„ì… ì‹œ ì›°ì»´ ë©”ì„¸ì§€ í•œ ì¤„ ë„£ì–´ì£¼ê¸°
    document.addEventListener("DOMContentLoaded", function(){
        const welcomeHtml =
            '<div class="faq-card">' +
            '  <div class="faq-head">ğŸ‘‹ í™˜ì˜í•©ë‹ˆë‹¤</div>' +
            '  <div class="faq-answer">' +
            '    ì‚¬ë‚´ ì§€ì‹ + ìµœì‹  ë‰´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ë‹µí•©ë‹ˆë‹¤.<br/>' +
            '    ì˜ˆ: "íœ´ê°€ ê·œì • ìš”ì•½í•´ì¤˜", "AIíŒ€ ê·¼ë¡œì‹œê°„ ì •ì±… ì•Œë ¤ì¤˜", "ì»¤í”¼ë‘ ìˆ˜ë©´ ê´€ê³„ ìµœì‹  ì—°êµ¬ ë­ì•¼?"<br/>' +
            '  </div>' +
            '</div>';
        appendMessage("bot", welcomeHtml, true);
    });
</script>

</body>
</html>
