{# ragapp/templates/ragapp/partials/consent_overlay.html #}
<!-- ✅ 첫 방문 동의 오버레이 -->
<div id="consentOverlay" class="consent-overlay" hidden>
  <div class="consent-card" role="dialog" aria-modal="true" aria-labelledby="consentGateTitle">
    <h3 id="consentGateTitle" class="consent-title">
      {{ CONSENT_TITLE|default:"질문 저장 안내 (필수)" }}
    </h3>

    <p class="consent-desc">
      {{ CONSENT_DESC_PREFIX|default:"이 화면에서 입력하는 내용은 아래와 같이 저장·이용됩니다."|safe }}
    </p>

    <ul class="consent-list">
      <li><strong>저장되는 내용</strong> : 질문, 답변 요약, 참고 링크 등</li>
      <li><strong>보관 장소</strong>: 이 서비스의 검색 DB(내부 서버)</li>
      <li><strong>사용 목적</strong> : 검색 품질과 서비스 개선을 위한 테스트</li>
    </ul>

    <p class="consent-desc">
      {% if CONSENT_DESC_SUFFIX %}
        {{ CONSENT_DESC_SUFFIX|safe }}
      {% else %}
        자세한 내용은
        <a class="link"
           href="{{ PRIVACY_PAGE_URL|default:'/privacy' }}"
           target="_blank"
           rel="noopener noreferrer">개인정보처리방침</a>
        을 확인해 주세요.
      {% endif %}
    </p>

    <label class="opt-line">
      <input type="checkbox" id="consent_required" />
      <span>
        {{ CONSENT_CHECK_LABEL|default:"위 내용을 읽었으며, 질문·답변 저장에 동의합니다." }}
      </span>
    </label>

    <div id="consentErr" class="consent-err" role="alert" aria-live="polite" hidden>
      {{ CONSENT_ERROR_MSG|default:"❌ 체크 후 계속할 수 있어요." }}
    </div>

    <div class="consent-actions">
      <a class="btn"
         href="{{ PRIVACY_PAGE_URL|default:'/privacy' }}"
         target="_blank"
         rel="noopener noreferrer">
        {{ CONSENT_DETAIL_BUTTON|default:"개인정보처리방침 열기" }}
      </a>
      <button class="btn info" id="consentConfirmBtn" type="button">
        {{ CONSENT_CONFIRM_BUTTON|default:"동의하고 계속하기" }}
      </button>
    </div>
  </div>
</div>
